# 美食分享平台系统设计文档

## 1. 系统概述

### 1.1 系统简介
美食分享平台是一个基于Vue.js和Spring Boot的全栈Web应用，旨在为用户提供一个分享美食、交流烹饪经验的在线社区平台。用户可以发布美食菜谱、查看他人的作品、进行评论互动，同时还可以获取营养搭配建议。

### 1.2 系统目标
1. 为用户提供一个便捷的美食分享平台
2. 实现美食菜谱的发布、浏览和管理
3. 提供营养成分分析和饮食建议
4. 支持用户社交互动和内容分享
5. 建立美食分类体系，方便用户检索

### 1.3 应用场景
- 美食爱好者分享烹饪经验
- 用户寻找特定菜品的制作方法
- 营养搭配指导
- 美食社区交流互动
- 饮食记录和管理

## 2. 系统架构

### 2.1 技术架构
```
前端层：
    - Vue.js 2.6.11
    - Element UI 2.15.14
    - Axios HTTP客户端
    - Vue Router 路由管理
    - WangEditor 富文本编辑器
    - ECharts 数据可视化

中间层：
    - RESTful API
    - JWT 用户认证
    - 文件上传/下载服务

后端层：
    - Spring Boot 2.2.4
    - MyBatis ORM框架
    - MySQL 5.7+ 数据库
```

### 2.2 系统架构图
```
[用户层]
    ↓
[前端(Vue.js)]
    ↓
[网关/负载均衡]
    ↓
[应用服务层(Spring Boot)]
    ↓
[数据访问层(MyBatis)]
    ↓
[数据存储层(MySQL)]
```

## 3. 数据库设计

### 3.1 E-R图
主要实体关系：
```
用户(User) ←→ 菜谱(Cookbook)
    ↓            ↓
评论(Evaluations) ← 内容分享(Content_Net)
    ↓            ↓
美食分类(Category) ← 营养成分(Nutriment)
```

### 3.2 核心数据表
1. user (用户表)
   - id: 用户ID
   - username: 用户名
   - password: 密码
   - avatar: 头像
   - create_time: 创建时间

2. cookbook (菜谱表)
   - id: 菜谱ID
   - user_id: 用户ID
   - title: 标题
   - content: 内容
   - category_id: 分类ID
   - is_publish: 是否公开
   - create_time: 创建时间

3. category (分类表)
   - id: 分类ID
   - name: 分类名称

4. nutriment (营养成分表)
   - id: 营养素ID
   - name: 营养素名称
   - unit: 单位

5. evaluations (评论表)
   - id: 评论ID
   - parent_id: 父评论ID
   - user_id: 用户ID
   - content: 评论内容
   - create_time: 创建时间

## 4. 功能模块设计

### 4.1 用户模块
1. 用户注册
2. 用户登录
3. 个人信息管理
4. 密码修改
5. 头像上传

### 4.2 菜谱管理模块
1. 菜谱发布
2. 菜谱编辑
3. 菜谱删除
4. 菜谱分类
5. 菜谱搜索

### 4.3 社交互动模块
1. 评论功能
2. 点赞功能
3. 内容分享
4. 用户关注

### 4.4 营养分析模块
1. 营养成分录入
2. 营养分析报告
3. 饮食建议
4. 饮食记录

## 5. 接口设计

### 5.1 用户接口
```
POST /api/user/register    # 用户注册
POST /api/user/login      # 用户登录
GET  /api/user/info       # 获取用户信息
PUT  /api/user/info       # 更新用户信息
```

### 5.2 菜谱接口
```
POST   /api/cookbook/add      # 添加菜谱
PUT    /api/cookbook/update   # 更新菜谱
DELETE /api/cookbook/delete   # 删除菜谱
GET    /api/cookbook/list     # 获取菜谱列表
GET    /api/cookbook/detail   # 获取菜谱详情
```

### 5.3 评论接口
```
POST   /api/comment/add      # 添加评论
DELETE /api/comment/delete   # 删除评论
GET    /api/comment/list     # 获取评论列表
```

## 6. 安全设计

### 6.1 用户认证
- 采用JWT token认证机制
- 密码加密存储
- Session管理

### 6.2 数据安全
- SQL注入防护
- XSS防护
- CSRF防护
- 敏感数据加密

### 6.3 访问控制
- 基于角色的访问控制(RBAC)
- API访问权限控制
- 资源访问控制

## 7. 性能优化

### 7.1 前端优化
- 路由懒加载
- 图片懒加载
- 组件按需加载
- 静态资源CDN加速

### 7.2 后端优化
- 数据库索引优化
- 缓存机制
- 连接池管理
- 分页查询

## 8. 部署方案

### 8.1 环境要求
- Node.js 12+
- JDK 1.8+
- MySQL 5.7+
- Maven 3.6+

### 8.2 部署步骤
1. 数据库部署
2. 后端服务部署
3. 前端项目部署
4. nginx配置

### 8.3 服务器配置建议
- CPU: 2核+
- 内存: 4GB+
- 硬盘: 50GB+
- 带宽: 5Mbps+

## 9. 项目进度规划

### 9.1 开发阶段
1. 需求分析与设计（1周）
2. 数据库设计与实现（1周）
3. 后端开发（2周）
4. 前端开发（2周）
5. 测试与优化（1周）

### 9.2 测试阶段
1. 单元测试
2. 集成测试
3. 性能测试
4. 用户测试

### 9.3 部署阶段
1. 环境配置
2. 应用部署
3. 系统调优
4. 监控配置

## 10. 系统监控与维护

### 10.1 监控指标
- 服务器性能监控
- 应用性能监控
- 数据库性能监控
- 用户行为监控

### 10.2 日志管理
- 访问日志
- 错误日志
- 操作日志
- 安全日志

### 10.3 备份策略
- 数据库定时备份
- 文件系统备份
- 配置文件备份
- 灾难恢复方案

## 11. 扩展性设计

### 11.1 系统扩展
- 微服务架构预留
- 分布式部署支持
- 集群扩展能力
- 新功能模块扩展

### 11.2 数据扩展
- 分库分表设计
- 数据归档策略
- 冷热数据分离
- 数据迁移方案 