{"remainingRequest":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\user\\DietHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\user\\DietHistory.vue","mtime":1733112097000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkRpZXRIaXN0b3J5IiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZGllSGlzdG9yeToge30sDQogICAgICAgICAgICBkaWFsb2dHb3VybWV0T3BlcmFpb246IGZhbHNlLA0KICAgICAgICAgICAgY29va2Jvb2tzOiBbXSwNCiAgICAgICAgICAgIGRpZXRIaXRvcnlMaXN0OiBbXSwNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5mZXRjaENvb2tib29rTGlzdCgpOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICByZWNvcmQoKSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KGAvZGlldEhpc3Rvcnkvc2F2ZWAsIHRoaXMuZGlldEhpdG9yeUxpc3QpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlczsNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICforrDlvZXppa7po58nLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKnycsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlldEhpdG9yeUxpc3QgPSBbXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuaWsOWinumlrumjn+S/oeaBr+W8guW4uO+8miIsIGVycm9yKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHJlbW92ZUNvb2tib29rKGRpZUhpc3RvcnkpIHsNCiAgICAgICAgICAgIHRoaXMuZGlldEhpdG9yeUxpc3QgPSB0aGlzLmRpZXRIaXRvcnlMaXN0LmZpbHRlcihlbnRpdHkgPT4gZW50aXR5LmNvb2tib29rSWQgIT09IGRpZUhpc3RvcnkuY29va2Jvb2tJZCk7DQogICAgICAgIH0sDQogICAgICAgIGdldENvb2tib29rTmFtZShkaWVIaXN0b3J5KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jb29rYm9va3MuZmlsdGVyKGVudGl0eSA9PiBlbnRpdHkuaWQgPT09IGRpZUhpc3RvcnkuY29va2Jvb2tJZClbMF0ubmFtZTsNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hDb29rYm9va0xpc3QoKSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoYC9jb29rYm9vay9xdWVyeVNlbGVjdGVkSXRlbXNBbGxgKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXM7DQogICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29va2Jvb2tzID0gZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5p+l6K+i6aOf6LCx5L+h5oGv5byC5bi477yaIiwgZXJyb3IpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkT3BlcmF0aW9uKCkgew0KICAgICAgICAgICAgdGhpcy5kaWV0SGl0b3J5TGlzdC5wdXNoKHRoaXMuZGllSGlzdG9yeSk7DQogICAgICAgICAgICB0aGlzLmNhbm5lbCgpOw0KICAgICAgICB9LA0KICAgICAgICBjYW5uZWwoKSB7DQogICAgICAgICAgICB0aGlzLmRpZUhpc3RvcnkgPSB7fTsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nR291cm1ldE9wZXJhaW9uID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgICAgIHJlY29yZEdvdXJtZXQoKSB7DQogICAgICAgICAgICB0aGlzLmRpYWxvZ0dvdXJtZXRPcGVyYWlvbiA9IHRydWU7DQogICAgICAgIH0sDQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["DietHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DietHistory.vue","sourceRoot":"src/views/user","sourcesContent":["dietHitoryList<template>\r\n    <div style=\"background-color: rgb(255,255,255);padding: 20px;\">\r\n        <div class=\"record\" @click=\"recordGourmet\">\r\n            <span style=\"font-size: 24px;font-weight: bold;\">\r\n                <i class=\"el-icon-food\" style=\"margin-right: 5px;\"></i>添加菜单\r\n            </span>\r\n        </div>\r\n        <h3>我的菜单</h3>\r\n        <div>\r\n            <div v-if=\"dietHitoryList.length === 0\">\r\n                <el-empty description=\"快补充菜单吧\"></el-empty>\r\n            </div>\r\n            <div v-else class=\"item-diet\" style=\"padding-block: 10px;\" v-for=\"(dietHistory, index) in dietHitoryList\">\r\n                <div style=\"font-size: 30px;font-weight: bold;\">{{ getCookbookName(dietHistory) }}</div>\r\n                <div style=\"margin-block: 4px;font-size: 14px;\">\r\n                    <span>\r\n                        {{ dietHistory.detail }} - {{ dietHistory.value }}g\r\n                    </span>\r\n                    <span style=\"float: right;\" @click=\"removeCookbook(dietHistory)\">\r\n                        <i class=\"el-icon-circle-close\"></i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div style=\"margin-block: 30px;\">\r\n                <el-button type=\"primary\" @click=\"record\">立即记录</el-button>\r\n            </div>\r\n        </div>\r\n        <el-dialog :show-close=\"false\" :visible.sync=\"dialogGourmetOperaion\" width=\"20%\">\r\n            <div style=\"padding:16px 20px;\">\r\n                <p>选择菜单</p>\r\n                <el-select style=\"width: 100%;\" size=\"small\" v-model=\"dieHistory.cookbookId\" placeholder=\"选择菜单\">\r\n                    <el-option v-for=\"item in cookbooks\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n                <p>备注</p>\r\n                <el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入内容\" v-model=\"dieHistory.detail\">\r\n                </el-input>\r\n                <p>食用量（g为单位）</p>\r\n                <input class=\"dialog-input\" v-model=\"dieHistory.value\" placeholder=\"输入\" />\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\" style=\"margin-top: 10px;\">\r\n                <span class=\"channel-button\" @click=\"cannel()\">\r\n                    取消操作\r\n                </span>\r\n                <span class=\"edit-button\" @click=\"addOperation()\">\r\n                    确认菜单\r\n                </span>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"DietHistory\",\r\n    data() {\r\n        return {\r\n            dieHistory: {},\r\n            dialogGourmetOperaion: false,\r\n            cookbooks: [],\r\n            dietHitoryList: [],\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchCookbookList();\r\n    },\r\n    methods: {\r\n        record() {\r\n            this.$axios.post(`/dietHistory/save`, this.dietHitoryList).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '记录饮食',\r\n                        message: '成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.dietHitoryList = [];\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"新增饮食信息异常：\", error);\r\n            })\r\n        },\r\n        removeCookbook(dieHistory) {\r\n            this.dietHitoryList = this.dietHitoryList.filter(entity => entity.cookbookId !== dieHistory.cookbookId);\r\n        },\r\n        getCookbookName(dieHistory) {\r\n            return this.cookbooks.filter(entity => entity.id === dieHistory.cookbookId)[0].name;\r\n        },\r\n        fetchCookbookList() {\r\n            this.$axios.get(`/cookbook/querySelectedItemsAll`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.cookbooks = data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询食谱信息异常：\", error);\r\n            })\r\n        },\r\n        addOperation() {\r\n            this.dietHitoryList.push(this.dieHistory);\r\n            this.cannel();\r\n        },\r\n        cannel() {\r\n            this.dieHistory = {};\r\n            this.dialogGourmetOperaion = false;\r\n        },\r\n        recordGourmet() {\r\n            this.dialogGourmetOperaion = true;\r\n        },\r\n    }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.item-diet:hover {\r\n    background-color: rgb(248, 248, 248);\r\n}\r\n\r\n.item-diet {\r\n    padding: 12px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n}\r\n\r\n.record {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: rgb(246, 246, 246);\r\n    min-height: 200px;\r\n    cursor: pointer;\r\n}\r\n\r\n.record:hover {\r\n    background-color: rgb(242, 242, 242);\r\n}\r\n</style>\r\n"]}]}