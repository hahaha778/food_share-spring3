{"remainingRequest":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\user\\MyCookbook.vue?vue&type=style&index=0&id=16504937&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\user\\MyCookbook.vue","mtime":1733212792000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLm51dHJpbWVudC1pdGVtOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQ2LCAyNDYsIDI0Nik7DQogICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KfQ0KDQoubnV0cmltZW50LWl0ZW0gew0KICAgIHBhZGRpbmc6IDhweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgbWFyZ2luLXJpZ2h0OiAyMHB4Ow0KDQogICAgLnVuaXQgew0KICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgfQ0KDQogICAgLm5hbWUgew0KICAgICAgICBmb250LXdlaWdodDogODAwOw0KICAgICAgICBjb2xvcjogcmdiKDUxLCA1MSwgNTEpOw0KICAgIH0NCg0KICAgIC5kZXRhaWwgew0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgIG1hcmdpbi1ibG9jazogNHB4Ow0KICAgIH0NCn0NCg=="},{"version":3,"sources":["MyCookbook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8eA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MyCookbook.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n    <el-row style=\"background-color: #FFFFFF;padding: 5px 0;border-radius: 5px;\">\r\n        <el-row style=\"padding: 10px;margin-left: 5px;\">\r\n            <el-row style=\"display: flex;justify-content: left;gap: 6px;\">\r\n                <span class=\"edit-button\" @click=\"add()\">\r\n                    新增食谱\r\n                </span>\r\n                <el-select style=\"width: 100px;\" @change=\"fetchFreshData\" size=\"small\"\r\n                    v-model=\"cookbookQueryDto.categoryId\" placeholder=\"菜系\">\r\n                    <el-option v-for=\"item in categories\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n                <el-date-picker style=\"width: 216px;\" @change=\"fetchFreshData\" size=\"small\" v-model=\"searchTime\"\r\n                    type=\"daterange\" range-separator=\"至\" start-placeholder=\"发布开始\" end-placeholder=\"发布结束\">\r\n                </el-date-picker>\r\n                <el-input size=\"small\" style=\"width: 166px;\" v-model=\"cookbookQueryDto.title\" placeholder=\"美食名\"\r\n                    clearable @clear=\"handleFilterClear\">\r\n                    <el-button slot=\"append\" @click=\"handleFilter\" icon=\"el-icon-search\"></el-button>\r\n                </el-input>\r\n            </el-row>\r\n        </el-row>\r\n        <el-row style=\"margin: 0 22px;border-top: 1px solid rgb(245,245,245);\">\r\n            <el-table :stripe=\"true\" :data=\"tableData\" style=\"width: 100%\">\r\n                <el-table-column prop=\"userAvatar\" width=\"68\" label=\"头像\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-avatar :size=\"25\" :src=\"scope.row.userAvatar\" style=\"margin-top: 10px;\"></el-avatar>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"title\" label=\"食谱名\"></el-table-column>\r\n                <el-table-column prop=\"id\" :sortable=\"true\" label=\"内容ID\" width=\"98\"></el-table-column>\r\n                <el-table-column prop=\"categoryName\" label=\"所属类别\" width=\"118\"></el-table-column>\r\n                <el-table-column prop=\"isPublish\" label=\"是否公开\" width=\"118\">\r\n                    <template slot-scope=\"scope\">\r\n                        <span>{{ scope.row.isPublish ? '公开' : '私人' }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"createTime\" label=\"创建时间\" :sortable=\"true\" width=\"168\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <span class=\"text-button\" @click=\"handleEdit(scope.row)\">修改</span>\r\n                        <span class=\"text-button\" @click=\"handleDelete(scope.row)\">删除</span>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination style=\"margin:10px 0;float: right;\" @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[20, 50]\"\r\n                :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"totalItems\"></el-pagination>\r\n        </el-row>\r\n        <el-dialog :show-close=\"false\" :visible.sync=\"dialogCookbookOperaion\" width=\"40%\">\r\n            <div style=\"padding:16px 20px;\">\r\n                <p>{{ isOperation ? '食谱修改' : '食谱新增' }}</p>\r\n                <el-row>\r\n                    <p>食谱</p>\r\n                    <el-upload class=\"avatar-uploader\"\r\n                        action=\"http://localhost:21090/api/food-share-sys/v1.0/file/upload\" :show-file-list=\"false\"\r\n                        :on-success=\"handleCoverSuccess\">\r\n                        <img v-if=\"cover\" :src=\"cover\" style=\"width: 150px;height: 150px;\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </el-row>\r\n                <div>\r\n                    <input class=\"dialog-input\" v-model=\"data.title\" placeholder=\"食谱名称\" />\r\n                </div>\r\n                <div>\r\n                    <Editor height=\"calc(100vh - 550px)\" :receiveContent=\"data.content\" @on-receive=\"onReceive\" />\r\n                </div>\r\n                <div style=\"margin-block: 10px;\">\r\n                    <span class=\"dialog-hover\">所属菜系</span>\r\n                    <el-select style=\"width: 100px;\" @change=\"fetchFreshData\" size=\"small\" v-model=\"data.categoryId\"\r\n                        placeholder=\"菜系\">\r\n                        <el-option v-for=\"item in categories\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\" style=\"margin-top: 10px;\">\r\n                <span class=\"channel-button\" @click=\"cannel()\">\r\n                    取消操作\r\n                </span>\r\n                <span v-if=\"!isOperation\" class=\"edit-button\" @click=\"addOperation()\">\r\n                    确定新增\r\n                </span>\r\n                <span v-else class=\"edit-button\" @click=\"updateOperation()\">\r\n                    确定修改\r\n                </span>\r\n            </span>\r\n        </el-dialog>\r\n        <el-dialog :show-close=\"false\" :visible.sync=\"dialogConfigOperation\" width=\"30%\">\r\n            <div style=\"padding:16px 20px;\">\r\n                <div>\r\n                    配置营养素信息\r\n                </div>\r\n                <div style=\"margin-top: 10px;background-color: rgb(248,248,248);padding: 10px;border-radius: 4px;\">\r\n                    <div style=\"margin-block: 4px;font-size: 20px;font-weight: 800;\">\r\n                        <i class=\"el-icon-food\" style=\"margin-right: 4px;\"></i>\r\n                        {{ data.title }}\r\n                    </div>\r\n                    <div style=\"font-size: 12px;\">\r\n                        <span>\r\n                            {{ data.categoryName }}\r\n                        </span>\r\n                        <span>\r\n                            发布于&nbsp;{{ data.createTime }}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <el-tabs v-model=\"activeName\" @tab-click=\"handleTabClick\">\r\n                        <el-tab-pane label=\"营养素列表\" name=\"first\">\r\n                            <div style=\"max-height: 350px;overflow-y: scroll;\">\r\n                                <div style=\"margin-block: 10px;\">\r\n                                    <el-input size=\"small\" style=\"width: 166px;\" v-model=\"nutrimentQueryDto.name\"\r\n                                        placeholder=\"用户名\">\r\n                                        <el-button slot=\"append\" @click=\"fetchNutrimentList\"\r\n                                            icon=\"el-icon-search\"></el-button>\r\n                                    </el-input>\r\n                                </div>\r\n                                <div v-if=\"nutrimentList.length === 0\">\r\n                                    <el-empty description=\"暂无营养素信息\"></el-empty>\r\n                                </div>\r\n                                <div v-else class=\"nutriment-item\" v-for=\"(nutriment, index) in nutrimentList\"\r\n                                    :key=\"index\">\r\n                                    <div>\r\n                                        <span class=\"unit\">\r\n                                            {{ nutriment.unit }}\r\n                                        </span>\r\n                                        <span class=\"name\">\r\n                                            {{ nutriment.name }}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div class=\"detail\">\r\n                                        {{ nutriment.detail }}\r\n                                    </div>\r\n                                    <div v-if=\"spaceNutriment.id === nutriment.id\">\r\n                                        <input @keyup.enter=\"confirmNutrimentConfig\" class=\"dialog-input\"\r\n                                            v-model=\"spaceNutriment.g100Value\" placeholder=\"每100g含量\" />\r\n                                    </div>\r\n                                    <div v-else>\r\n                                        <span @click=\"configNutrimentInfo(nutriment)\"\r\n                                            style=\"color: rgb(29, 153, 228);font-size: 12px;\">\r\n                                            配置\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </el-tab-pane>\r\n                        <el-tab-pane label=\"配置信息\" name=\"second\">\r\n                            <div v-if=\"cookbookNutrimentList.length === 0\">\r\n                                <el-empty description=\"暂无配置信息\"></el-empty>\r\n                            </div>\r\n                            <div v-else style=\"max-height: 350px;overflow-y: scroll;\">\r\n                                <div class=\"nutriment-item\" v-for=\"(nutriment, index) in cookbookNutrimentList\"\r\n                                    :key=\"index\">\r\n                                    <div>\r\n                                        <span class=\"unit\">\r\n                                            {{ nutriment.nutrimentUnit }}\r\n                                        </span>\r\n                                        <span class=\"name\">\r\n                                            {{ nutriment.nutrimentName }}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div v-if=\"spaceNutriment.id === nutriment.id\">\r\n                                        <input @keyup.enter=\"confirmUpadteNutrimentConfig\" class=\"dialog-input\"\r\n                                            v-model=\"spaceNutriment.g100Value\" placeholder=\"每100g含量\" />\r\n                                    </div>\r\n                                    <div v-else>\r\n                                        <span class=\"unit\">每100g含量\r\n                                            <span style=\"font-size: 18px;font-weight: bold;\">\r\n                                                {{ nutriment.g100Value }}{{ nutriment.nutrimentUnit }}\r\n                                            </span>\r\n                                        </span>\r\n                                        <span @click=\"updateNutrimentConfig(nutriment)\"\r\n                                            style=\"color: rgb(29, 153, 228);font-size: 12px;\">\r\n                                            修改\r\n                                        </span>\r\n                                        <span @click=\"delNutrimentConfig(nutriment)\"\r\n                                            style=\"color: rgb(229, 0, 0);font-size: 12px;\">\r\n                                            删除\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </el-tab-pane>\r\n                    </el-tabs>\r\n                </div>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\" style=\"margin-top: 10px;\">\r\n                <span class=\"channel-button\" @click=\"cannelConfig()\">\r\n                    取消操作\r\n                </span>\r\n            </span>\r\n        </el-dialog>\r\n    </el-row>\r\n</template>\r\n\r\n<script>\r\nimport Editor from \"@/components/Editor\"\r\nexport default {\r\n    components: { Editor },\r\n    data() {\r\n        return {\r\n            activeName: 'first',\r\n            data: {},\r\n            filterText: '',\r\n            currentPage: 1,\r\n            pageSize: 20,\r\n            totalItems: 0,\r\n            tableData: [],\r\n            delectedRows: [],\r\n            searchTime: [],\r\n            cover: null,\r\n            cookbookNutrimentList: [],\r\n            nutrimentQueryDto: { isPublish: true }, // 只要公开的\r\n            dialogConfigOperation: false, // 配置弹窗\r\n            dialogCookbookOperaion: false, // 弹窗\r\n            isOperation: false, // 默认新增\r\n            nutrimentList: [],\r\n            cookbookQueryDto: {}, // 搜索条件\r\n            spaceNutriment: {},\r\n        };\r\n    },\r\n    created() {\r\n        this.fetchFreshData();\r\n        this.fetchFreshCategories();\r\n    },\r\n    methods: {\r\n        handleCoverSuccess(res, file) {\r\n            this.$notify({\r\n                duration: 1500,\r\n                title: '封面上传',\r\n                message: res.code === 200 ? '上传成功' : '上传失败',\r\n                type: res.code === 200 ? 'success' : 'error'\r\n            });\r\n            // 上传成功则更新封面\r\n            if (res.code === 200) {\r\n                this.cover = res.data;\r\n            }\r\n        },\r\n        confirmUpadteNutrimentConfig() {\r\n            const cookbookNutriment = {\r\n                id: this.spaceNutriment.id,\r\n                g100Value: this.spaceNutriment.g100Value\r\n            }\r\n            this.$axios.post('/cookbookNutriment/save', cookbookNutriment).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 提示配置成功\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '营养素配置操作',\r\n                        message: '修改配置成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.activeName = 'second';\r\n                } else {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '营养素配置操作',\r\n                        message: res.data.msg,\r\n                        type: 'error'\r\n                    });\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"修改食谱营养素关联信息异常：\", error);\r\n            });\r\n        },\r\n        // 修改食谱关联的营养素信息\r\n        updateNutrimentConfig(nutriment) {\r\n            this.spaceNutriment = nutriment;\r\n            console.log(\"update:\", nutriment);\r\n        },\r\n        // 删除食谱关联的营养素信息\r\n        delNutrimentConfig(nutriment) {\r\n            console.log(\"del:\", nutriment);\r\n        },\r\n        // 确定营养素配置\r\n        confirmNutrimentConfig() {\r\n            // 构造关联对象\r\n            const cookbookNutriment = {\r\n                cookbookId: this.data.id,\r\n                nutrimentId: this.spaceNutriment.id,\r\n                g100Value: this.spaceNutriment.g100Value\r\n            }\r\n            this.$axios.post('/cookbookNutriment/save', cookbookNutriment).then(res => {\r\n                if (res.data.code === 200) {\r\n                    // 提示配置成功\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '营养素配置操作',\r\n                        message: '配置成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.activeName = 'second';\r\n                } else {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '营养素配置操作',\r\n                        message: res.data.msg,\r\n                        type: 'error'\r\n                    });\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"新增食谱营养素关联信息异常：\", error);\r\n            });\r\n        },\r\n        configNutrimentInfo(nutriment) {\r\n            this.spaceNutriment = nutriment;\r\n        },\r\n        // 标签页切换\r\n        handleTabClick(tab, event) {\r\n            if (tab.index === '0') { // 查的营养素信息\r\n                this.fetchNutrimentList();\r\n            } else if (tab.index === '1') { // 查的是配置信息\r\n                this.fetchCookbookNutrimentData(this.data.id);\r\n            }\r\n        },\r\n        // 查询食谱关联的营养素信息\r\n        fetchCookbookNutrimentData(cookbookId) {\r\n            const cookbookNutrimentQueryDto = { cookbookId }\r\n            this.$axios.post('/cookbookNutriment/query', cookbookNutrimentQueryDto).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.cookbookNutrimentList = res.data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询食谱营养素关联信息异常：\", error);\r\n            });\r\n        },\r\n        fetchNutrimentList() {\r\n            this.$axios.post('/nutriment/query', this.nutrimentQueryDto).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.nutrimentList = res.data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询营养素异常：\", error);\r\n            });\r\n        },\r\n        configNutriment(cookbook) {\r\n            this.data = cookbook;\r\n            this.fetchNutrimentList();\r\n            this.dialogConfigOperation = true;\r\n        },\r\n        cannelConfig() {\r\n            this.dialogConfigOperation = false;\r\n        },\r\n        cannel() {\r\n            this.data = {};\r\n            this.dialogCookbookOperaion = false;\r\n            this.isOperation = false;\r\n        },\r\n        addOperation() {\r\n            this.data.cover = this.cover;\r\n            this.$axios.post('/cookbook/userSave', this.data).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '食谱操作',\r\n                        message: '新增成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.cannel();\r\n                    this.fetchFreshData();\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"新增食谱异常：\", error);\r\n            });\r\n        },\r\n        updateOperation() {\r\n            this.data.cover = this.cover;\r\n            this.$axios.put('/cookbook/update', this.data).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '食谱操作',\r\n                        message: '修改成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.cannel();\r\n                    this.fetchFreshData();\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"修改食谱异常：\", error);\r\n            });\r\n        },\r\n        // 查询美食做法的信息\r\n        fetchFreshCategories() {\r\n            this.$axios.post('/category/query', {}).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.categories = res.data.data;\r\n                    const allCategory = { id: null, name: '全部' };\r\n                    // 头插\r\n                    this.categories.unshift(allCategory);\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询美食做法异常：\", error);\r\n            });\r\n        },\r\n        onReceive(content) {\r\n            this.data.content = content;\r\n        },\r\n        // 打开食谱新增弹窗\r\n        add() {\r\n            this.dialogCookbookOperaion = true;\r\n        },\r\n        // 批量删除数据\r\n        async batchDelete() {\r\n            if (!this.delectedRows.length) {\r\n                this.$message(`未选中任何数据`);\r\n                return;\r\n            }\r\n            const confirmed = await this.$swalConfirm({\r\n                title: '删除食谱数据',\r\n                text: `删除后不可恢复，是否继续？`,\r\n                icon: 'warning',\r\n            });\r\n            if (confirmed) {\r\n                try {\r\n                    let ids = this.delectedRows.map(entity => entity.id);\r\n                    const response = await this.$axios.post(`/cookbook/batchDelete`, ids);\r\n                    if (response.data.code === 200) {\r\n                        this.$notify({\r\n                            duration: 1000,\r\n                            title: '信息删除',\r\n                            message: '删除成功',\r\n                            type: 'success'\r\n                        });\r\n                        this.fetchFreshData();\r\n                        return;\r\n                    }\r\n                } catch (error) {\r\n                    this.$message.error(\"食谱删除异常：\", error);\r\n                    console.error(`食谱删除异常：`, error);\r\n                }\r\n            }\r\n        },\r\n        // 信息查询\r\n        async fetchFreshData() {\r\n            try {\r\n                this.tableData = [];\r\n                let startTime = null;\r\n                let endTime = null;\r\n                if (this.searchTime != null && this.searchTime.length === 2) {\r\n                    const [startDate, endDate] = await Promise.all(this.searchTime.map(date => date.toISOString()));\r\n                    startTime = `${startDate.split('T')[0]}T00:00:00`;\r\n                    endTime = `${endDate.split('T')[0]}T23:59:59`;\r\n                }\r\n                // 请求参数\r\n                const params = {\r\n                    current: this.currentPage,\r\n                    size: this.pageSize,\r\n                    key: this.filterText,\r\n                    startTime: startTime,\r\n                    endTime: endTime,\r\n                    ...this.cookbookQueryDto\r\n                };\r\n                const response = await this.$axios.post('/cookbook/queryUser', params);\r\n                const { data } = response;\r\n                this.tableData = data.data;\r\n                this.totalItems = data.total;\r\n            } catch (error) {\r\n                this.$message.error(\"查询食谱异常:\", error);\r\n                console.error('查询食谱异常:', error);\r\n            }\r\n        },\r\n        handleFilter() {\r\n            this.currentPage = 1;\r\n            this.fetchFreshData();\r\n        },\r\n        handleFilterClear() {\r\n            this.filterText = '';\r\n            this.handleFilter();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.pageSize = val;\r\n            this.currentPage = 1;\r\n            this.fetchFreshData();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.currentPage = val;\r\n            this.fetchFreshData();\r\n        },\r\n        handleEdit(row) {\r\n            this.cover = row.cover;\r\n            this.data = row;\r\n            this.dialogCookbookOperaion = true;\r\n            this.isOperation = true;\r\n        },\r\n        handleDelete(row) {\r\n            this.delectedRows.push(row);\r\n            this.batchDelete();\r\n        }\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.nutriment-item:hover {\r\n    background-color: rgb(246, 246, 246);\r\n    border-radius: 4px;\r\n}\r\n\r\n.nutriment-item {\r\n    padding: 8px;\r\n    cursor: pointer;\r\n    margin-right: 20px;\r\n\r\n    .unit {\r\n        font-size: 10px;\r\n    }\r\n\r\n    .name {\r\n        font-weight: 800;\r\n        color: rgb(51, 51, 51);\r\n    }\r\n\r\n    .detail {\r\n        font-size: 12px;\r\n        margin-block: 4px;\r\n    }\r\n}\r\n</style>"]}]}