{"remainingRequest":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\admin\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\admin\\Main.vue","mtime":1733308393000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTGluZUNoYXJ0IGZyb20gIkAvY29tcG9uZW50cy9MaW5lQ2hhcnQiDQppbXBvcnQgeyB0aW1lQWdvIH0gZnJvbSAiQC91dGlscy9kYXRhIg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsgTGluZUNoYXJ0IH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHN0YXRpY0RhdGE6IFtdLA0KICAgICAgICAgICAgZ291cm1ldExpc3Q6IFtdLA0KICAgICAgICAgICAgc2hhcmVWYWx1ZXM6IFtdLA0KICAgICAgICAgICAgc2hhcmVEYXRlczogW10sDQogICAgICAgICAgICBnb3VybWV0VmFsdWVzOiBbXSwNCiAgICAgICAgICAgIGdvdXJtZXREYXRlczogW10sDQogICAgICAgICAgICBkZWZhdWx0UXVlcnlEYXlzOiAzNjUsIC8vIOeUseS6juaVsOaNruWkquWwke+8jOebtOaOpeafpeS4gOW5tOadpea1i+ivlQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmZlbnRjaFN0YXRpY0NvdW50KCk7DQogICAgICAgIHRoaXMuZmVudGNoZ291cm1ldCgpOw0KICAgICAgICB0aGlzLm5ldEl0ZW1TZWxlY3RlZCh0aGlzLmRlZmF1bHRRdWVyeURheXMpOw0KICAgICAgICB0aGlzLmdvdXJtZXRJdGVtU2VsZWN0ZWQodGhpcy5kZWZhdWx0UXVlcnlEYXlzKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgdGltZU91dCh0aW1lKSB7DQogICAgICAgICAgICByZXR1cm4gdGltZUFnbyh0aW1lKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5p+l6K+i5oyH5a6a5pe26Ze05YaF55qE576O6aOf5YGa5rOV5a2Y6YePDQogICAgICAgIGdvdXJtZXRJdGVtU2VsZWN0ZWQoZGF5KSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoYC9nb3VybWV0L2RheXNRdWVyeS8ke2RheX1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdvdXJtZXRWYWx1ZXMgPSByZXMuZGF0YS5kYXRhLm1hcChtb25leSA9PiBtb25leS5jb3VudCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ291cm1ldERhdGVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkubmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIOafpeivouaMh+WumuaXtumXtOWGheeahOWGheWuueWIhuS6q+mHjw0KICAgICAgICBuZXRJdGVtU2VsZWN0ZWQoZGF5KSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KGAvY29udGVudE5ldC9kYXlzUXVlcnlgLCB7IGRheSB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlVmFsdWVzID0gcmVzLmRhdGEuZGF0YS5tYXAobW9uZXkgPT4gbW9uZXkuY291bnQpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlRGF0ZXMgPSByZXMuZGF0YS5kYXRhLm1hcChtb25leSA9PiBtb25leS5uYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgcmVhZEdvdXJtZXQoZ291cm1ldCkgew0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZ291cm1ldElkJywgZ291cm1ldC5pZCk7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NlZUdvdXJtZXREZXRhaWwnKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5p+l6K+i6ZiF6K+76YeP5pyA6auY55qE576O6aOf5YGa5rOV5pWw5o2uDQogICAgICAgIGZlbnRjaGdvdXJtZXQoKSB7DQogICAgICAgICAgICBjb25zdCBnb3VybWV0UXVlcnlEdG8gPSB7DQogICAgICAgICAgICAgICAgY3VycmVudDogMSwNCiAgICAgICAgICAgICAgICBzaXplOiA1DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvZ291cm1ldC9xdWVyeUJ5VmlldycsIGdvdXJtZXRRdWVyeUR0bykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nb3VybWV0TGlzdCA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIOafpeivoumdmeaAgeaVsOaNrg0KICAgICAgICBmZW50Y2hTdGF0aWNDb3VudCgpIHsNCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgnL3ZpZXdzL3N0YXRpY0NvbnRyb2xzJykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNEYXRhID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div style=\"box-sizing: border-box;overflow-y: hidden;overflow-x: hidden;\">\r\n        <el-row>\r\n            <el-col :span=\"16\">\r\n                <div>\r\n                    <div>\r\n                        <el-row style=\"padding-block: 20px;margin-inline: 30px;background-color: rgb(246,246,246);\">\r\n                            <el-col :span=\"4\" v-for=\"(staticItem, index) in staticData\" :key=\"index\">\r\n                                <div class=\"static-item\">\r\n                                    <el-statistic group-separator=\",\" :precision=\"0\" :value=\"staticItem.count\"\r\n                                        :title=\"staticItem.name\"></el-statistic>\r\n                                </div>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                    <div>\r\n                        <div style=\"padding: 20px 60px;box-sizing: border-box;\">\r\n                            <LineChart height=\"280px\" tag=\"内容分享趋势\" @on-selected=\"netItemSelected\" :values=\"shareValues\"\r\n                                :date=\"shareDates\" />\r\n                        </div>\r\n                        <div style=\"padding: 20px 60px;box-sizing: border-box;\">\r\n                            <LineChart height=\"280px\" tag=\"收录美食做法\" @on-selected=\"gourmetItemSelected\"\r\n                                :values=\"gourmetValues\" :date=\"gourmetDates\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n                <div class=\"buttom\">\r\n                    <p style=\"font-size: 24px;\">最热帖子</p>\r\n                    <div class=\"gourmet-item\" v-for=\"(gourmet, index) in gourmetList\" :key=\"index\">\r\n                        <div class=\"left\">\r\n                            <img :src=\"gourmet.cover\" :alt=\"gourmet.title\" srcset=\"\">\r\n                        </div>\r\n                        <div class=\"right\">\r\n                            <div class=\"user\">\r\n                                <img :src=\"gourmet.userAvatar\" alt=\"\" srcset=\"\">\r\n                                <span>{{ gourmet.userName }}</span>\r\n                            </div>\r\n                            <div class=\"title\" @click=\"readGourmet(gourmet)\">{{ gourmet.title }}</div>\r\n                            <div class=\"info\">\r\n                                <span>{{ gourmet.categoryName }}</span>\r\n                                <span>\r\n                                    点赞({{ gourmet.upvoteCount}})\r\n                                </span>\r\n                                <span>\r\n                                    阅读({{ gourmet.viewCount }})\r\n                                </span>\r\n                                <span>\r\n                                    收藏({{ gourmet.saveCount }})\r\n                                </span>\r\n                                <span>{{ timeOut(gourmet.createTime) }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nimport LineChart from \"@/components/LineChart\"\r\nimport { timeAgo } from \"@/utils/data\"\r\nexport default {\r\n    components: { LineChart },\r\n    data() {\r\n        return {\r\n            staticData: [],\r\n            gourmetList: [],\r\n            shareValues: [],\r\n            shareDates: [],\r\n            gourmetValues: [],\r\n            gourmetDates: [],\r\n            defaultQueryDays: 365, // 由于数据太少，直接查一年来测试\r\n        }\r\n    },\r\n    created() {\r\n        this.fentchStaticCount();\r\n        this.fentchgourmet();\r\n        this.netItemSelected(this.defaultQueryDays);\r\n        this.gourmetItemSelected(this.defaultQueryDays);\r\n    },\r\n    methods: {\r\n        timeOut(time) {\r\n            return timeAgo(time);\r\n        },\r\n        // 查询指定时间内的美食做法存量\r\n        gourmetItemSelected(day) {\r\n            this.$axios.get(`/gourmet/daysQuery/${day}`).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.gourmetValues = res.data.data.map(money => money.count);\r\n                    this.gourmetDates = res.data.data.map(money => money.name);\r\n                }\r\n            });\r\n        },\r\n        // 查询指定时间内的内容分享量\r\n        netItemSelected(day) {\r\n            this.$axios.post(`/contentNet/daysQuery`, { day }).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.shareValues = res.data.data.map(money => money.count);\r\n                    this.shareDates = res.data.data.map(money => money.name);\r\n                }\r\n            });\r\n        },\r\n        readGourmet(gourmet) {\r\n            sessionStorage.setItem('gourmetId', gourmet.id);\r\n            this.$router.push('/seeGourmetDetail');\r\n        },\r\n        // 查询阅读量最高的美食做法数据\r\n        fentchgourmet() {\r\n            const gourmetQueryDto = {\r\n                current: 1,\r\n                size: 5\r\n            }\r\n            this.$axios.post('/gourmet/queryByView', gourmetQueryDto).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.gourmetList = res.data.data;\r\n                }\r\n            });\r\n        },\r\n        // 查询静态数据\r\n        fentchStaticCount() {\r\n            this.$axios.get('/views/staticControls').then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.staticData = res.data.data;\r\n                }\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.buttom {\r\n    padding: 0px 20px;\r\n    box-sizing: border-box;\r\n\r\n    .gourmet-item {\r\n        display: flex;\r\n        justify-content: left;\r\n        padding: 10px 0;\r\n        cursor: pointer;\r\n\r\n        .left {\r\n            padding: 5px;\r\n            box-sizing: border-box;\r\n\r\n            img {\r\n                width: 138px;\r\n                height: 80px;\r\n                border-radius: 5px;\r\n            }\r\n        }\r\n\r\n        .right {\r\n            padding: 5px;\r\n            box-sizing: border-box;\r\n\r\n            .user {\r\n                display: flex;\r\n                justify-content: left;\r\n                align-items: center;\r\n                margin-block: 4px;\r\n\r\n                img {\r\n                    width: 20px;\r\n                    height: 20px;\r\n                    border-radius: 10px;\r\n                }\r\n\r\n                span {\r\n                    margin-left: 4px;\r\n                    font-size: 14px;\r\n                }\r\n            }\r\n\r\n            .title {\r\n                font-size: 16px;\r\n                width: 200px;\r\n                font-weight: 800;\r\n                padding-bottom: 6px;\r\n                white-space: nowrap;\r\n                /* 防止文本换行 */\r\n                overflow: hidden;\r\n                /* 隐藏超出容器的文本 */\r\n                text-overflow: ellipsis;\r\n                /* 使用省略号表示被截断的文本 */\r\n            }\r\n\r\n            .title:hover {\r\n                text-decoration: underline;\r\n                text-decoration-style: dashed;\r\n            }\r\n\r\n            .detail {\r\n                font-size: 14px;\r\n                color: rgb(131, 130, 130);\r\n            }\r\n\r\n            .info {\r\n                font-size: 12px;\r\n                margin-top: 4px;\r\n                display: flex;\r\n                justify-content: left;\r\n                gap: 10px;\r\n\r\n                span:first-child {\r\n                    display: inline-block;\r\n                    padding: 1px 3px;\r\n                    border-radius: 2px;\r\n                    background-color: rgb(237, 243, 249);\r\n                    color: rgb(136, 115, 233);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n</style>"]}]}