{"remainingRequest":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\admin\\SeeGourmetDetail.vue?vue&type=style&index=0&id=7d877262&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\src\\views\\admin\\SeeGourmetDetail.vue","mtime":1733299391000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sunshine\\Desktop\\sql\\美食分享平台\\美食分享平台\\源码\\前端\\food-share-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi51cHZvdGUtb3BlcmF0aW9uIHsNCiAgICBmb250LXdlaWdodDogODAwOw0KICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHBhZGRpbmc6IDZweCAxMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCn0NCg0KLnVwdm90ZS1vcGVyYXRpb246aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDUsIDI0NSwgMjQ1KTsNCn0NCg0KLnRpdGxlIHsNCiAgICBmb250LXNpemU6IDI4cHg7DQogICAgZm9udC13ZWlnaHQ6IDgwMDsNCiAgICBtYXJnaW4tYmxvY2s6IDZweDsNCn0NCg0KLmluZm8gew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBwYWRkaW5nOiA0cHggNnB4Ow0KICAgIGNvbG9yOiByZ2IoOTAsIDg5LCA4OSk7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGxlZnQ7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBtYXJnaW4tbGVmdDogMnB4Ow0KICAgIGdhcDogMTBweDsNCiAgICBtYXJnaW4tYmxvY2s6IDRweDsNCn0NCg0KDQouaXRlbS1nb3VybWV0IHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogbGVmdDsNCiAgICBnYXA6IDEwcHg7DQogICAgcGFkZGluZzogMTBweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoMjQ1LCAyNDUsIDI0NSk7DQoNCiAgICAubGVmdCB7DQogICAgICAgIGltZyB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAucmlnaHQgew0KICAgICAgICAuaW5mbyB7DQogICAgICAgICAgICBwYWRkaW5nOiAycHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBsZWZ0Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogNXB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgY29sb3I6IHJnYig5MCwgODksIDg5KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC50aXRsZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIHdpZHRoOiAxNDBweDsNCiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgIC50aXRsZTpob3ZlciB7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbi1zdHlsZTogZGFzaGVkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmRldGFpbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgY29sb3I6IHJnYig5MCwgODksIDg5KTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGxlZnQ7DQogICAgICAgICAgICBnYXA6IDEwcHg7DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["SeeGourmetDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SeeGourmetDetail.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <el-row style=\"width: 1000px;margin: 0 auto;background-color: rgb(255,255,255);border-radius: 2px;\">\r\n        <el-col :span=\"16\" style=\"padding: 10px 20px;border-right: 1px solid rgb(245,245,245);\">\r\n            <div style=\"position: sticky;top: 0px;z-index: 100;background-color: rgb(255,255,255);padding-block: 10px;\">\r\n                <div class=\"title\">{{ gourmet.title }}</div>\r\n                <div class=\"info\">\r\n                    <img style=\"width: 20px;height: 20px;border-radius: 10px;\" :src=\"gourmet.userAvatar\" alt=\"\">\r\n                    <span>{{ gourmet.userName }}</span>\r\n                    <span>\r\n                        {{ gourmet.createTime }}\r\n                    </span>\r\n                    <span>\r\n                        点赞({{ gourmet.upvoteCount }})\r\n                    </span>\r\n                    <span>\r\n                        浏览({{ gourmet.viewCount }})\r\n                    </span>\r\n                    <span>\r\n                        收藏({{ gourmet.saveCount }})\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div style=\"border-top: 1px solid rgb(245,245,245);\">\r\n                <div v-html=\"gourmet.content\"></div>\r\n            </div>\r\n            <div style=\"margin: 40px 0;display: flex;justify-content: center;align-items: center;\">\r\n                <span>\r\n                    <span class=\"upvote-operation\">\r\n                        <el-tooltip class=\"item\" effect=\"dark\" :content=\"upvoteStatus ? '取消点赞' : '点赞这篇帖子'\"\r\n                            placement=\"bottom\">\r\n                            <span @click=\"opeationUpvote\">\r\n                                <i class=\"el-icon-discount\"></i>\r\n                                <span>\r\n                                    {{ gourmet.upvoteCount }}人喜欢\r\n                                </span>\r\n                            </span>\r\n                        </el-tooltip>\r\n                    </span>\r\n                    <span class=\"upvote-operation\">\r\n                        <el-tooltip class=\"item\" effect=\"dark\" :content=\"saveStatus ? '取消收藏' : '收藏这篇帖子'\"\r\n                            placement=\"bottom\">\r\n                            <span @click=\"opeationSave\">\r\n                                <i class=\"el-icon-star-off\"></i>\r\n                                <span>\r\n                                    {{ gourmet.saveCount }}人收藏\r\n                                </span>\r\n                            </span>\r\n                        </el-tooltip>\r\n                    </span>\r\n                </span>\r\n            </div>\r\n            <div style=\"border-top: 1px solid rgb(245,245,245);\">\r\n                <Evaluations :contentId=\"gourmetId\" contentType=\"GOURMET\" />\r\n            </div>\r\n        </el-col>\r\n        <el-col :span=\"8\" style=\"padding: 10px 20px;position: sticky;top: 0px;\">\r\n            <div style=\"margin-block: 20px;\">\r\n                <h4 style=\"margin-top: 10px;\">评分信息</h4>\r\n                <!-- 显示评分区域是有条件：你没有评过分才能去评分（显示） -->\r\n                <div v-if=\"!ratingStatus\" style=\"margin-block: 30px;\">\r\n                    <div style=\"margin-block: 4px;font-size: 12px;color: rgb(4, 81, 165);\">轻触评个分数吧</div>\r\n                    <el-rate @change=\"ratingEvent\" v-model=\"ratingScore\" show-text>\r\n                    </el-rate>\r\n                </div>\r\n                <div\r\n                    style=\"border-radius: 5px;padding: 20px;display: flex;justify-content: center;align-items: center;background-color: rgb(250,250,250);\">\r\n                    <div>\r\n                        <div style=\"text-align: center;margin-block: 5px;font-weight: bold;\">总评分</div>\r\n                        <el-rate v-model=\"gourmet.rating\" disabled show-score text-color=\"#ff9900\"\r\n                            score-template=\"{value}\">\r\n                        </el-rate>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div v-if=\"ratingVos.length === 0\">\r\n                        <el-empty description=\"暂无评论哦！\"></el-empty>\r\n                    </div>\r\n                    <div v-else style=\"margin-block: 10px;\" v-for=\"(ratingVO, m) in ratingVos\" :key=\"m\">\r\n                        <div style=\"display: flex;justify-content: left;align-items: center;gap: 8px;\">\r\n                            <img style=\"width: 20px;height: 20px;border-radius: 10px;\" :src=\"ratingVO.userAvatar\" alt=\"\" srcset=\"\">\r\n                            <span style=\"font-size: 12px;\">{{ ratingVO.userName }}</span>\r\n                        </div>\r\n                        <div style=\"margin-block: 4px;\">\r\n                            <el-rate v-model=\"ratingVO.score\" disabled show-score text-color=\"#ff9900\"\r\n                                score-template=\"{value}\">\r\n                            </el-rate>\r\n                        </div>\r\n                        <div style=\"font-size: 12px;color: rgb(51,51,51);\">\r\n                            {{ ratingVO.createTime }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<script>\r\nimport Evaluations from \"@/components/Evaluations\"\r\nexport default {\r\n    components: { Evaluations },\r\n    name: \"GourmetDetail\",\r\n    data() {\r\n        return {\r\n            gourmetId: null,\r\n            gourmet: {},\r\n            ratingScore: 0, // 评分\r\n            recommendGourmet: [],\r\n            ratingVos: [], // 用户评分数据\r\n            upvoteStatus: false, // 默认未点赞\r\n            saveStatus: false, // 默认未收藏\r\n            ratingStatus: false, // 评分状态\r\n        }\r\n    },\r\n    created() {\r\n        this.loadGourmetId();\r\n        this.fetchTopGourmet();\r\n    },\r\n    methods: {\r\n        // 查询用户的评分数据\r\n        fetchRatingData(contentId) {\r\n            const interactionQueryDto = {\r\n                contentId,\r\n                current: 1,\r\n                size: 3\r\n            }\r\n            this.$axios.post(`/interaction/queryUserRating`, interactionQueryDto).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.ratingVos = data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询评分信息异常：\", error);\r\n            })\r\n        },\r\n        // 用户评分时触发\r\n        ratingEvent() {\r\n            this.$axios.post(`/interaction/ratingOperation/${this.gourmetId}/${this.ratingScore}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.gourmet = data.data[0];\r\n                    this.dealRating(this.gourmet);\r\n                    this.$notify({\r\n                        duration: 1000, // 毫秒\r\n                        title: '评分',\r\n                        message: '评分成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.ratingStatus = true;\r\n                    this.fetchRatingData(this.gourmetId);\r\n                } else {\r\n                    this.$message(data.msg);\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"评分操作异常：\", error);\r\n            })\r\n        },\r\n        // 查询点赞状态\r\n        fetchUpvoteOperation(contentId) {\r\n            this.$axios.get(`/interaction/upvoteStatus/${contentId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(\"点赞的状态=>\", data.data);\r\n                    this.upvoteStatus = data.data > 0;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"通过点赞状态异常：\", error);\r\n            })\r\n        },\r\n        // 查询评分状态\r\n        fetchRatingOperation(contentId) {\r\n            this.$axios.get(`/interaction/ratingStatus/${contentId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(\"评分的状态=>\", data.data);\r\n                    this.ratingStatus = data.data > 0;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"通过评分状态异常：\", error);\r\n            })\r\n        },\r\n        // 查询收藏状态\r\n        fetchSaveOperation(contentId) {\r\n            this.$axios.get(`/interaction/saveStatus/${contentId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(\"收藏的状态=>\", data.data);\r\n                    this.saveStatus = data.data > 0;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"通过收藏状态异常：\", error);\r\n            })\r\n        },\r\n        // 收藏操作\r\n        opeationSave() {\r\n            this.$axios.post(`/interaction/saveOperation/${this.gourmetId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(data.data > 0 ? '收藏成功' : '取消收藏成功');\r\n                    if (data.data > 0) {\r\n                        this.gourmet.saveCount += 1;\r\n                    } else {\r\n                        this.gourmet.saveCount -= 1;\r\n                    }\r\n                    this.saveStatus = data.data > 0;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"收藏操作异常：\", error);\r\n            })\r\n        },\r\n        // 点赞操作\r\n        opeationUpvote() {\r\n            this.$axios.post(`/interaction/upvoteOperation/${this.gourmetId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(data.data > 0 ? '点赞成功' : '取消点赞成功');\r\n                    if (data.data > 0) {\r\n                        this.gourmet.upvoteCount += 1;\r\n                    } else {\r\n                        this.gourmet.upvoteCount -= 1;\r\n                    }\r\n                    this.upvoteStatus = data.data > 0;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"点赞操作异常：\", error);\r\n            })\r\n        },\r\n        readGourmet(gourmet) {\r\n            this.fetchGourmetById(gourmet.id);\r\n        },\r\n        loadGourmetId() {\r\n            this.gourmetId = Number(sessionStorage.getItem('gourmetId'));\r\n            // 加载美食做法数据\r\n            this.fetchGourmetById(this.gourmetId);\r\n            // 处理浏览操作\r\n            this.viewOperation(this.gourmetId);\r\n            // 加载点赞状态\r\n            this.fetchUpvoteOperation(this.gourmetId);\r\n            // 加载收藏状态\r\n            this.fetchSaveOperation(this.gourmetId);\r\n            // 加载评分状态\r\n            this.fetchRatingOperation(this.gourmetId);\r\n            // 加载用户的评分信息\r\n            this.fetchRatingData(this.gourmetId);\r\n        },\r\n        dealRating(gourmet) {\r\n            this.gourmet.rating = gourmet.rating === null ? 0 : gourmet.rating;\r\n        },\r\n        // 通过ID查找对应的美食做法\r\n        fetchGourmetById(gourmetId) {\r\n            this.$axios.get(`/gourmet/${gourmetId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.gourmet = data.data[0];\r\n                    this.dealRating(this.gourmet);\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"通过ID查询美食做法异常：\", error);\r\n            })\r\n        },\r\n        // 浏览操作\r\n        viewOperation(contentId) {\r\n            this.$axios.post(`/interaction/viewOperation/${contentId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    console.log(\"浏览执行...\");\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"浏览操作异常：\", error);\r\n            })\r\n        },\r\n        // 获取通过算法查回来，现在只是占位处理\r\n        fetchTopGourmet() {\r\n            this.$axios.post(`/gourmet/queryList`, { size: 3, current: 1 }).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.recommendGourmet = data.data;\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询推荐美食做法异常：\", error);\r\n            })\r\n        },\r\n    }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.upvote-operation {\r\n    font-weight: 800;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    padding: 6px 10px;\r\n    border-radius: 5px;\r\n}\r\n\r\n.upvote-operation:hover {\r\n    background-color: rgb(245, 245, 245);\r\n}\r\n\r\n.title {\r\n    font-size: 28px;\r\n    font-weight: 800;\r\n    margin-block: 6px;\r\n}\r\n\r\n.info {\r\n    font-size: 12px;\r\n    padding: 4px 6px;\r\n    color: rgb(90, 89, 89);\r\n    display: flex;\r\n    justify-content: left;\r\n    align-items: center;\r\n    margin-left: 2px;\r\n    gap: 10px;\r\n    margin-block: 4px;\r\n}\r\n\r\n\r\n.item-gourmet {\r\n    display: flex;\r\n    justify-content: left;\r\n    gap: 10px;\r\n    padding: 10px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    border-bottom: 1px solid rgb(245, 245, 245);\r\n\r\n    .left {\r\n        img {\r\n            width: 100px;\r\n            border-radius: 5px;\r\n        }\r\n    }\r\n\r\n    .right {\r\n        .info {\r\n            padding: 2px;\r\n            display: flex;\r\n            justify-content: left;\r\n            align-items: center;\r\n            gap: 5px;\r\n            font-size: 12px;\r\n            color: rgb(90, 89, 89);\r\n        }\r\n\r\n        .title {\r\n            font-size: 14px;\r\n            font-weight: 600;\r\n            overflow: hidden;\r\n            width: 140px;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n\r\n        .title:hover {\r\n            text-decoration: underline;\r\n            text-decoration-style: dashed;\r\n        }\r\n\r\n        .detail {\r\n            font-size: 12px;\r\n            padding: 2px 6px;\r\n            color: rgb(90, 89, 89);\r\n            display: flex;\r\n            justify-content: left;\r\n            gap: 10px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}